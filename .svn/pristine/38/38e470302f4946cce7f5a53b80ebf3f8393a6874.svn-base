doctype html
html
	head
		// A few key dependencies, linked in order
		meta(charset="utf-8")
		meta(http-equiv="X-UA-Compatible", content="IE=edge")
		meta(name="viewport", content="width=device-width, initial-scale=1")
		meta(name="description", content="")
		meta(name="author", content="")
		//link(rel="shortcut icon", href="../../assets/ico/favicon.ico")
		title= "Olli's Nistkasten"

		link(rel="stylesheet", href="/library/bootstrap/css/bootstrap.min.css")
		//link(rel="stylesheet", href="/library/bootstrap/css/navbar-fixed-top.css")
		link(rel="stylesheet", href="/library/bootstrap/css/carousel.css")
		link(rel="stylesheet", href="/library/fancybox/jquery.fancybox-1.3.4.css")
		link(rel="stylesheet", href="/styles/timeline.css")
		link(rel="stylesheet", href="/styles/style.css")
		script.
			(function(i,s,o,g,r,a,m){
				i['GoogleAnalyticsObject']=r;
				i[r]=i[r]||
				function(){
					(i[r].q=i[r].q||[]).push(arguments)
				},
				i[r].l=1*new Date();
				a=s.createElement(o),m=s.getElementsByTagName(o)[0];
				a.async=1;
				a.src=g;
				m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-48803229-1', 'dlinkddns.com');
			ga('send', 'pageview');

		body
			div.blog-masthead
				div.container
					//div.navbar-header
					//	button(type="button", data-toggle="collapse", data-target=".navbar-collapse").navbar-toggle
					//		span.sr-only Toggle navigation
					//		span.icon-bar
					//		span.icon-bar
					//		span.icon-bar
					nav.blog-nav
						a(href="/", class=(req.target.controller == 'index' && req.target.action == 'index')?'active':'').blog-nav-item
							span.glyphicon.glyphicon-camera
							|  Olli's Nistkasten
						a(href="/livestream", class=(req.target.controller == 'index' && req.target.action == 'livestream')?'active':'').blog-nav-item
							span.glyphicon.glyphicon-facetime-video
							|  Live Stream
						a(href="/einstellungen", class=(req.target.controller == 'settings' && req.target.action == 'index')?'active':'').blog-nav-item
							span.glyphicon.glyphicon-cog
							|  Einstellungen
					if (!req.user)
						form(action="/login", method="post", role="form").navbar-form.navbar-right.visible-lg
							div.form-group
								input(type="text",name="username", placeholder="Benutzername").form-control
							div.form-group
								input(type="password", name="password", placeholder="Passwort").form-control
							button(type="submit").btn.btn-success Anmelden
					else
						a(href="/logout", style="margin-top: 3px;").pull-right
							button(type="submit").btn.btn-danger Logout
						//ul.nav.navbar-nav
						//	li.active
						//		a(href="/") Home
						//	li
						//		a(href="/livestream")
						//			span.glyphicon.glyphicon-facetime-video
						//			| Live Stream
						//	li
						//		a(href="/") gespeicherte Bilder
			//div(role="navigation").navbar.navbar-default.navbar-fixed-top
			//	div.container
			//		div.navbar-header
			//			button(type="button", data-toggle="collapse", data-target=".navbar-collapse").navbar-toggle
			//				span.sr-only Toggle navigation
			//				span.icon-bar
			//				span.icon-bar
			//				span.icon-bar
			//			a(href="/").navbar-brand Olli's Nistkasten
			//		div.navbar-collapse.collapse
			//			ul.nav.navbar-nav
			//				li.active
			//					a(href="/") Home
			//				li
			//					a(href="/livestream")
			//						span.glyphicon.glyphicon-facetime-video
			//						| Live Stream
			//				li
			//					a(href="/") gespeicherte Bilder
			div.container
				- console.log(req.target.controller)
				- console.log(req.target.action)
				block body
	script(type="text/javascript", src="https://code.jquery.com/jquery-1.9.0.min.js")
	script(type="text/javascript", src="/library/bootstrap/js/bootstrap.min.js")
	script(type="text/javascript", src="/js/docs.min.js")
	// Bring in the socket.io client
	script(type="text/javascript", src="/js/socket.io.js")
	// then beef it up with some convenience logic for talking to Sails.js'
	script(type="text/javascript", src="/js/sails.io.js")
	// listen on socket.io for incoming messages
	script(type="text/javascript", src="/js/app.js")

	script(type="text/javascript", src="/library/fancybox/jquery.mousewheel-3.0.4.pack.js")
	script(type="text/javascript", src="/library/fancybox/jquery.fancybox-1.3.4.js")
	script(type="text/javascript", src="/js/imagelightbox.min.js")
	script.
		$(document).ready(function() {
			/*
			$("a[rel=imagegroup]").fancybox({
				'transitionIn'		: 'elastic',
				'transitionOut'		: 'elastic',
				'titlePosition' 	: 'over',
				'titleFormat'		: function(title, currentArray, currentIndex, currentOpts) {
					return '<span id="fancybox-title-over">Aufnahme ' + (currentIndex + 1) + ' / ' + currentArray.length + (title.length ? ' &nbsp; ' + title : '') + '</span>';
				}
			});
			*/
			var activityIndicatorOn = function()
				{
					$( '<div id="imagelightbox-loading"><div></div></div>' ).appendTo( 'body' );
				},
				activityIndicatorOff = function()
				{
					$( '#imagelightbox-loading' ).remove();
				},
	
				overlayOn = function()
				{
					$( '<div id="imagelightbox-overlay"></div>' ).appendTo( 'body' );
				},
				overlayOff = function()
				{
					$( '#imagelightbox-overlay' ).remove();
				},
	
				closeButtonOn = function( instance )
				{
					$( '<a href="#" id="imagelightbox-close">Close</a>' ).appendTo( 'body' ).on( 'click', function(){ $( this ).remove(); instance.quitImageLightbox(); return false; });
				},
				closeButtonOff = function()
				{
					$( '#imagelightbox-close' ).remove();
				},
	
				captionOn = function()
				{
					var description = $( 'a[href="' + $( '#imagelightbox' ).attr( 'src' ) + '"] img' ).attr( 'alt' );
					if( description.length > 0 )
						$( '<div id="imagelightbox-caption">' + description + '</div>' ).appendTo( 'body' );
				},
				captionOff = function()
				{
					$( '#imagelightbox-caption' ).remove();
				};
			var instanceC = $( 'a.picture' ).imageLightbox(
			{
				selector:       'id="imagelightbox"',   // string;
				allowedTypes:   'png|jpg|jpeg|gif',     // string;
				animationSpeed: 250,                    // integer;
				preloadNext:    true,                   // bool;            silently preload the next image
				enableKeyboard: true,                   // bool;            enable keyboard shortcuts (arrows Left/Right and Esc)
				quitOnEnd:      false,                  // bool;            quit after viewing the last image
				quitOnImgClick: false,                  // bool;            quit when the viewed image is clicked
				quitOnDocClick: true,                   // bool;            quit when anything but the viewed image is clicked
				onStart:        function() { overlayOn(); closeButtonOn( instanceC ); },                  // function/bool;   calls function when the lightbox starts
				onEnd:          function() { overlayOff(); closeButtonOff(); captionOff(); activityIndicatorOff(); },                  // function/bool;   calls function when the lightbox quits
				onLoadStart:    function() { captionOff(); activityIndicatorOn(); },                  // function/bool;   calls function when the image load begins
				onLoadEnd:      function() { captionOn(); activityIndicatorOff(); }                   // function/bool;   calls function when the image finishes loading
			});
		})
